<!DOCTYPE html>
<html>
  <head>
    <title>AR Demo</title>
  </head>

  <script type="text/javascript" src="js/aframe.min.js"></script>
  <script type="text/javascript" src="js/aframe-extras.loader.min.js"></script>
  <script type="text/javascript" src="js/aframe-ar.js"></script>
  <script>
    AFRAME.registerComponent('markerhandler', {
        init: function() {
            const animatedMarker = document.querySelector("#animated-marker");
            const aEntity = document.querySelector("#animated-model");
    
            // every click, we make our model grow in size :)
            animatedMarker.addEventListener('click', function(ev, target){
                const intersectedElement = ev && ev.detail && ev.detail.intersectedEl;
                if (aEntity && intersectedElement === aEntity) {
                    // const scale = aEntity.getAttribute('scale');
                    // Object.keys(scale).forEach((key) => scale[key] = scale[key] + 1);
                    // aEntity.setAttribute('scale', scale);
                    alert('touch!')
                }
            });
    }});
  </script>

  <body>
    <a-scene embedded arjs="debugUIEnabled:false">
      <a-assets>
          <a-asset-item id="animated-asset" src="https://thanks-ar.curseoff.com/data/CesiumMan.gltf"></a-asset-item>
      </a-assets>

      <a-marker markerhandler preset="hiro" emitevents="true" cursor="rayOrigin: mouse" id="animated-marker" type='barcode' value='1'>
        <a-entity
          id="animated-model"
          gltf-model="#animated-asset"
          scale="0.5">
        </a-entity>
      </a-marker>

      <a-entity camera></a-entity>
    </a-scene>
  </body>
</html>


